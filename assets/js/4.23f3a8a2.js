(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{277:function(e,a,t){e.exports=t.p+"assets/img/macrecovery.af5c41c1.png"},278:function(e,a,t){e.exports=t.p+"assets/img/download-done.05d30da0.png"},299:function(e,a,t){e.exports=t.p+"assets/img/unknown-13.2dca606f.png"},433:function(e,a,t){e.exports=t.p+"assets/img/unknown-5.0cee0d3a.png"},434:function(e,a,t){e.exports=t.p+"assets/img/unknown-6.c65407b2.png"},435:function(e,a,t){e.exports=t.p+"assets/img/unknown-8.21d65816.png"},436:function(e,a,t){e.exports=t.p+"assets/img/unknown-9.d7a601da.png"},437:function(e,a,t){e.exports=t.p+"assets/img/unknown-11.0cee0d3a.png"},438:function(e,a,t){e.exports=t.p+"assets/img/unknown-12.c65407b2.png"},439:function(e,a,t){e.exports=t.p+"assets/img/unknown-14.21d65816.png"},440:function(e,a,t){e.exports=t.p+"assets/img/unknown-15.4ec42b10.png"},441:function(e,a,t){e.exports=t.p+"assets/img/unknown-16.a34cfc74.png"},442:function(e,a,t){e.exports=t.p+"assets/img/unknown-17.d7a601da.png"},443:function(e,a,t){e.exports=t.p+"assets/img/unknown-18.4d8a1388.png"},444:function(e,a,t){e.exports=t.p+"assets/img/unknown-20.7e0e5028.png"},445:function(e,a,t){e.exports=t.p+"assets/img/unknown-21.04611101.png"},591:function(e,a,t){"use strict";t.r(a);var s=t(10),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"在-linux-中制作安装程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-linux-中制作安装程序"}},[e._v("#")]),e._v(" 在 Linux 中制作安装程序")]),e._v(" "),a("p",[e._v("虽然你不需要重新安装macOS来使用OpenCore，但一些用户更喜欢使用全新的引导管理器升级。")]),e._v(" "),a("p",[e._v("开始之前，你需要准备以下内容:")]),e._v(" "),a("ul",[a("li",[e._v("4GB U盘")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("macrecovery.py"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"下载macos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载macos"}},[e._v("#")]),e._v(" 下载macOS")]),e._v(" "),a("p",[e._v("现在开始，首先 cd 到"),a("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("macrecovery 的文件夹"),a("OutboundLink")],1),e._v(" 并运行以下命令之一:")]),e._v(" "),a("p",[a("img",{attrs:{src:t(277),alt:""}})]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Adjust below command to the correct folder")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~/Downloads/OpenCore-0/Utilities/macrecovery/\n")])])]),a("p",[e._v("接下来，根据要启动的操作系统运行以下命令之一:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Lion (10.7):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-2E6FAB96566FE58C "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000F25Y00 download\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-C3EC7CD22292981F "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000F0HM00 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Mountain Lion (10.8):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-7DF2A3B5E5D671ED "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000F65100 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Mavericks (10.9):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-F60DEB81FF30ACF6 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000FNN100 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Yosemite (10.10):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-E43C1C25D4880AD6 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000GDVW00 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# El Capitan (10.11):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-FFE5EF870D7BA81A "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000GQRX00 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Sierra (10.12):")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-77F17D7DA9285301 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000J0DX00 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# High Sierra (10.13)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-7BA5B2D9E42DDD94 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000J80300 download\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-BE088AF8C5EB4FA2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000J80300 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Mojave (10.14)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-7BA5B2DFE22DDD8C "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000KXPG00 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Catalina (10.15)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-00BE6ED71E35EB86 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000000000 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Big Sur (11)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-42FD25EABCABB274 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000000000 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Monterey (12)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-FFE5EF870D7BA81A "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000000000 download\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Latest version")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ie. Ventura (13)")]),e._v("\npython3 ./macrecovery.py "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-b")]),e._v(" Mac-4B682C642B45593E "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" 00000000000000000 download\n")])])]),a("p",[e._v("现在，在终端中运行其中一个命令，完成后你将得到类似于下面的输出:")]),e._v(" "),a("p",[a("img",{attrs:{src:t(278),alt:""}})]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("注意")]),e._v(": 根据操作系统的不同，您将获得 BaseSystem 或 RecoveryImage 文件。它们以相同的方式工作，所以当我们引用 BaseSystem 时，相同的信息适用于 RecoveryImage")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("macOS 12及以上版本注意")]),e._v(": 由于最新macOS版本引入了USB堆栈的更改，在安装macOS之前，强烈建议您映射USB端口(使用USBToolBox)。")]),e._v(" "),a("ul",[a("li",[a("span",{staticStyle:{color:"red"}},[e._v(" 注意: ")]),e._v(" 在macOS 11.3及更新版本中，"),a("a",{attrs:{href:"https://github.com/dortania/bugtracker/issues/162",target:"_blank",rel:"noopener noreferrer"}},[e._v("XhciPortLimit被破坏导致启动循环"),a("OutboundLink")],1),e._v(".\n"),a("ul",[a("li",[e._v("如果你已经"),a("a",{attrs:{href:"https://dortania.github.io/OpenCore-Post-Install/usb/",target:"_blank",rel:"noopener noreferrer"}},[e._v("映射了你的USB端口"),a("OutboundLink")],1),e._v(" 并且禁用了 "),a("code",[e._v("XhciPortLimit")]),e._v(" ，那么你可以正常启动macOS 11.3+。")])])])])])]),e._v(" "),a("h2",{attrs:{id:"制作安装程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#制作安装程序"}},[e._v("#")]),e._v(" 制作安装程序")]),e._v(" "),a("p",[e._v("本节的目标是在USB设备中创建必要的分区。你可以使用你最喜欢的程序，比如"),a("code",[e._v("gdisk")]),e._v(" "),a("code",[e._v("fdisk")]),e._v(" "),a("code",[e._v("parted")]),e._v(" "),a("code",[e._v("gparted")]),e._v(" 或 "),a("code",[e._v("gnome-disks")]),e._v("。本指南将重点介绍 "),a("code",[e._v("gdisk")]),e._v(" ，因为它很好，可以在稍后更改分区类型，因为我们需要它来引导 macOS Recovery HD。(这里使用的发行版是Ubuntu 18.04，其他版本或发行版也可以)")]),e._v(" "),a("p",[e._v("感谢 "),a("a",{attrs:{href:"https://github.com/midi1996",target:"_blank",rel:"noopener noreferrer"}},[e._v("midi1996"),a("OutboundLink")],1),e._v(" 为 "),a("a",{attrs:{href:"https://midi1996.github.io/hackintosh-internet-install-gitbook/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Internet安装指南"),a("OutboundLink")],1),e._v(" 所做的工作。")]),e._v(" "),a("h3",{attrs:{id:"方法-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法-1"}},[e._v("#")]),e._v(" 方法 1")]),e._v(" "),a("p",[e._v("在终端:")]),e._v(" "),a("ol",[a("li",[e._v("运行 "),a("code",[e._v("lsblk")]),e._v(" 并确定你的USB设备块\n"),a("img",{attrs:{src:t(433),alt:"lsblk"}})]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v("sudo gdisk /dev/<你的USB块>")]),e._v(" "),a("ol",[a("li",[e._v("如果您被问及使用什么分区表，选择GPT。\n"),a("img",{attrs:{src:t(434),alt:"Select GPT"}})]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("p")]),e._v(" 来打印你的区块的分区(并验证它是否是需要的分区)\n"),a("img",{attrs:{src:t(299),alt:""}})]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("o")]),e._v(" 来清除分区表，并创建一个新的GPT表(如果不是空的)\n"),a("ol",[a("li",[e._v("用 "),a("code",[e._v("y")]),e._v(" 确认\n"),a("img",{attrs:{src:t(435),alt:""}})])])]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("n")]),e._v(" "),a("ol",[a("li",[a("code",[e._v("partition number")]),e._v(": 默认为空")]),e._v(" "),a("li",[a("code",[e._v("first sector")]),e._v(": 默认为空")]),e._v(" "),a("li",[a("code",[e._v("last sector")]),e._v(": 整个磁盘保持空白")]),e._v(" "),a("li",[a("code",[e._v("Hex code or GUID")]),e._v(": "),a("code",[e._v("0700")]),e._v(" 用于Microsoft基本数据分区类型")])])]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("w")]),e._v(" "),a("ul",[a("li",[e._v("用 "),a("code",[e._v("y")]),e._v(" 确认\n"),a("img",{attrs:{src:t(436),alt:""}})]),e._v(" "),a("li",[e._v("在某些情况下需要重启电脑，但如果你想确定的话，很少会重启电脑。你也可以尝试重新插入你的u盘。")])])]),e._v(" "),a("li",[e._v("通过发送 "),a("code",[e._v("q")]),e._v(" 来关闭 "),a("code",[e._v("gdisk")]),e._v(" (通常它应该自己退出)")])])]),e._v(" "),a("li",[e._v("使用 "),a("code",[e._v("lsblk")]),e._v(" 来确定分区的标识符")]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v('sudo mkfs.vfat -F 32 -n "OPENCORE" /dev/<你的USB分区块>')]),e._v(" 格式化USB到FAT32并命名为OPENCORE")]),e._v(" "),a("li",[e._v("然后 "),a("code",[e._v("cd")]),e._v(" 到 "),a("code",[e._v("/OpenCore/Utilities/macrecovery/")]),e._v(" 你应该得到一个 "),a("code",[e._v(".dmg")]),e._v(" 和 "),a("code",[e._v(".chunklist")]),e._v(" 文件\n"),a("ol",[a("li",[e._v("挂载您的USB分区 "),a("code",[e._v("udisksctl")]),e._v(" ("),a("code",[e._v("udisksctl mount -b /dev/<你的USB分区块>")]),e._v(", 在大多数情况下不需要sudo) 或者 "),a("code",[e._v("mount")]),e._v(" ("),a("code",[e._v("sudo mount /dev/<你的USB分区块> /where/your/mount/stuff")]),e._v(", sudo是必需的)")]),e._v(" "),a("li",[a("code",[e._v("cd")]),e._v(" 到你的USB驱动器和 "),a("code",[e._v("mkdir com.apple.recovery.boot")]),e._v(" 在FAT32 USB分区的根目录下")]),e._v(" "),a("li",[e._v("现在 "),a("code",[e._v("cp")]),e._v(" 或者 "),a("code",[e._v("rsync")]),e._v(" 将 "),a("code",[e._v("BaseSystem.dmg")]),e._v(" 和 "),a("code",[e._v("BaseSystem.chunklist")]),e._v(" 放入 "),a("code",[e._v("com.apple.recovery.boot")]),e._v(" 文件夹.")])])])]),e._v(" "),a("h3",{attrs:{id:"方法-2-在情况1无效的情况下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法-2-在情况1无效的情况下"}},[e._v("#")]),e._v(" 方法 2 (在情况1无效的情况下)")]),e._v(" "),a("p",[e._v("在终端:")]),e._v(" "),a("ol",[a("li",[e._v("运行 "),a("code",[e._v("lsblk")]),e._v(" 并确定您的USB设备块\n"),a("img",{attrs:{src:t(437),alt:""}})]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v("sudo gdisk /dev/<你的USB块>")]),e._v(" "),a("ol",[a("li",[e._v("如果询问使用什么分区表，选择GPT。\n"),a("img",{attrs:{src:t(438),alt:""}})]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("p")]),e._v(" 来打印你的区块的分区(并验证它是否是需要的分区)\n"),a("img",{attrs:{src:t(299),alt:""}})]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("o")]),e._v(" 来清除分区表，并创建一个新的GPT表(如果不是空的)\n"),a("ol",[a("li",[e._v("用 "),a("code",[e._v("y")]),e._v(" 确认\n"),a("img",{attrs:{src:t(439),alt:""}})])])]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("n")]),e._v(" "),a("ol",[a("li",[e._v("partition number: 默认为空")]),e._v(" "),a("li",[e._v("first sector: 默认为空")]),e._v(" "),a("li",[e._v("last sector:"),a("code",[e._v("+200M")]),e._v("来创建一个200MB的分区，稍后将在OPENCORE上命名")]),e._v(" "),a("li",[e._v("Hex code or GUID: "),a("code",[e._v("0700")]),e._v(" 用于Microsoft基本数据分区类型\n"),a("img",{attrs:{src:t(440),alt:""}})])])]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("n")]),e._v(" "),a("ol",[a("li",[e._v("partition number: 默认为空")]),e._v(" "),a("li",[e._v("first sector: 默认为空")]),e._v(" "),a("li",[e._v("last sector: 保持默认 (或者如果你想进一步划分USB的其余部分，可以将其设为“+3G”)")]),e._v(" "),a("li",[e._v("Hex code or GUID: "),a("code",[e._v("af00")]),e._v(" 为苹果HFS/HFS+分区类型\n"),a("img",{attrs:{src:t(441),alt:""}})])])]),e._v(" "),a("li",[e._v("发送 "),a("code",[e._v("w")]),e._v(" "),a("ul",[a("li",[e._v("用 "),a("code",[e._v("y")]),e._v(" 确认\n"),a("img",{attrs:{src:t(442),alt:""}})]),e._v(" "),a("li",[e._v("在某些情况下需要重启电脑，但如果你想确定的话，很少会重启电脑。你也可以尝试重新插入你的u盘。")])])]),e._v(" "),a("li",[e._v("通过发送 "),a("code",[e._v("q")]),e._v(" 来关闭 "),a("code",[e._v("gdisk")]),e._v(" (通常它应该自己退出)")])])]),e._v(" "),a("li",[e._v("再次使用 "),a("code",[e._v("lsblk")]),e._v(" 来确定200MB驱动器和其他分区\n"),a("img",{attrs:{src:t(443),alt:""}})]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v('sudo mkfs.vfat -F 32 -n "OPENCORE" /dev/<你的 200MB 分区块>')]),e._v(" 将200MB分区格式化为FAT32，命名为OPENCORE")]),e._v(" "),a("li",[e._v("然后 "),a("code",[e._v("cd")]),e._v(" 到 "),a("code",[e._v("/OpenCore/Utilities/macrecovery/")]),e._v(" 你应该得到一个 "),a("code",[e._v(".dmg")]),e._v(" 和 "),a("code",[e._v(".chunklist")]),e._v(" 文件\n"),a("ol",[a("li",[e._v("挂载你的USB分区 "),a("code",[e._v("udisksctl")]),e._v(" ("),a("code",[e._v("udisksctl mount -b /dev/<你的 200MB 分区块>")]),e._v(", 大多数情况下不需要sudo) 或用 "),a("code",[e._v("mount")]),e._v(" ("),a("code",[e._v("sudo mount /dev/<你的 200MB 分区块> /where/your/mount/stuff")]),e._v(", sudo是必需的)")]),e._v(" "),a("li",[a("code",[e._v("cd")]),e._v(" 到你的U盘和 "),a("code",[e._v("mkdir com.apple.recovery.boot")]),e._v(" 在你的FAT32 USB分区根")]),e._v(" "),a("li",[e._v("下载 "),a("code",[e._v("dmg2img")]),e._v(" (在大多数发行版上可用)")]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v("dmg2img -l BaseSystem.dmg")]),e._v(" 并确定哪个分区具有 "),a("code",[e._v("disk image")]),e._v(" 属性\n"),a("img",{attrs:{src:t(444),alt:""}})]),e._v(" "),a("li",[e._v("运行 "),a("code",[e._v("sudo dmg2img -p <the partition number> BaseSystem.dmg /dev/<你的 3GB+ 分区块>")]),e._v(" 来提取恢复映像并将其写入分区磁盘\n"),a("ul",[a("li",[e._v("这需要一些时间。如果你用的是速度较慢的USB(我用一个速度较快的USB2.0驱动器只花了不到5分钟)。\n"),a("img",{attrs:{src:t(445),alt:""}})])])])])])]),e._v(" "),a("h2",{attrs:{id:"现在所有这些都完成了-前往设置efi-来完成你的工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#现在所有这些都完成了-前往设置efi-来完成你的工作"}},[e._v("#")]),e._v(" 现在所有这些都完成了，前往"),a("RouterLink",{attrs:{to:"/installer-guide/opencore-efi.html"}},[e._v("设置EFI")]),e._v(" 来完成你的工作")],1)])}),[],!1,null,null,null);a.default=r.exports}}]);